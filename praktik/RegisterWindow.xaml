<Window x:Class="praktik.RegisterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:praktik"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        mc:Ignorable="d"
        Title="Регистрация пользователя" Height="650" Width="450" WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#9C27B0" Offset="0"/>
                <GradientStop Color="#7B1FA2" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>
        
        <!-- Анимированные элементы строительства -->
        <Canvas>
            <!-- Здание в процессе строительства -->
            <Rectangle Width="120" Height="200" Fill="#FFECEFF1" Stroke="#FF616161" StrokeThickness="2" 
                     Canvas.Left="30" Canvas.Bottom="50"/>
            
            <!-- Строящиеся этажи -->
            <Rectangle x:Name="floor1" Width="120" Height="40" Fill="#FFE0E0E0" Stroke="#FF616161" StrokeThickness="1" 
                     Canvas.Left="30" Canvas.Bottom="50">
                <Rectangle.RenderTransform>
                    <ScaleTransform x:Name="floor1Scale" ScaleY="0"/>
                </Rectangle.RenderTransform>
                <Rectangle.Triggers>
                    <EventTrigger RoutedEvent="Rectangle.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="floor1Scale" 
                                    Storyboard.TargetProperty="ScaleY"
                                    From="0" To="1" Duration="0:0:2" 
                                    BeginTime="0:0:0"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Rectangle.Triggers>
            </Rectangle>
            
            <Rectangle x:Name="floor2" Width="120" Height="40" Fill="#FFE0E0E0" Stroke="#FF616161" StrokeThickness="1" 
                     Canvas.Left="30" Canvas.Bottom="90">
                <Rectangle.RenderTransform>
                    <ScaleTransform x:Name="floor2Scale" ScaleY="0"/>
                </Rectangle.RenderTransform>
                <Rectangle.Triggers>
                    <EventTrigger RoutedEvent="Rectangle.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="floor2Scale" 
                                    Storyboard.TargetProperty="ScaleY"
                                    From="0" To="1" Duration="0:0:2" 
                                    BeginTime="0:0:2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Rectangle.Triggers>
            </Rectangle>
            
            <Rectangle x:Name="floor3" Width="120" Height="40" Fill="#FFE0E0E0" Stroke="#FF616161" StrokeThickness="1" 
                     Canvas.Left="30" Canvas.Bottom="130">
                <Rectangle.RenderTransform>
                    <ScaleTransform x:Name="floor3Scale" ScaleY="0"/>
                </Rectangle.RenderTransform>
                <Rectangle.Triggers>
                    <EventTrigger RoutedEvent="Rectangle.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="floor3Scale" 
                                    Storyboard.TargetProperty="ScaleY"
                                    From="0" To="1" Duration="0:0:2" 
                                    BeginTime="0:0:4"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Rectangle.Triggers>
            </Rectangle>
            
            <!-- Строитель -->
            <Path Fill="#FFFFB74D" Stroke="#FF616161" StrokeThickness="1" Canvas.Right="50" Canvas.Bottom="100">
                <Path.Data>
                    <PathGeometry>
                        <!-- Тело строителя -->
                        <PathFigure StartPoint="0,0">
                            <LineSegment Point="0,30"/>
                            <LineSegment Point="20,30"/>
                            <LineSegment Point="20,0"/>
                            <LineSegment Point="0,0"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
            </Path>
            
            <!-- Голова строителя с каской -->
            <Ellipse Width="24" Height="24" Fill="#FFFFB74D" Stroke="#FF616161" StrokeThickness="1" 
                   Canvas.Right="48" Canvas.Bottom="130"/>
            <Path Fill="#FFFFEB3B" Stroke="#FF616161" StrokeThickness="1" Canvas.Right="48" Canvas.Bottom="140">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="0,0">
                            <ArcSegment Point="24,0" Size="12,5"/>
                            <LineSegment Point="24,10"/>
                            <ArcSegment Point="0,10" Size="12,5" SweepDirection="Counterclockwise"/>
                            <LineSegment Point="0,0"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
                <Path.RenderTransform>
                    <TranslateTransform x:Name="helmetTranslation" X="0" Y="0"/>
                </Path.RenderTransform>
                <Path.Triggers>
                    <EventTrigger RoutedEvent="Path.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="helmetTranslation" 
                                    Storyboard.TargetProperty="Y"
                                    From="-2" To="2" Duration="0:0:1" 
                                    AutoReverse="True" RepeatBehavior="Forever"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Path.Triggers>
            </Path>
            
            <!-- Рука с инструментом -->
            <Path Fill="#FFFFB74D" Stroke="#FF616161" StrokeThickness="1" Canvas.Right="30" Canvas.Bottom="120">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="0,0">
                            <LineSegment Point="30,10"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
                <Path.RenderTransform>
                    <RotateTransform x:Name="armRotation" Angle="0" CenterX="0" CenterY="0"/>
                </Path.RenderTransform>
                <Path.Triggers>
                    <EventTrigger RoutedEvent="Path.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="armRotation" 
                                    Storyboard.TargetProperty="Angle"
                                    From="-10" To="20" Duration="0:0:0.5" 
                                    AutoReverse="True" RepeatBehavior="Forever"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Path.Triggers>
            </Path>
            
            <!-- Молоток -->
            <Path Fill="#FF9E9E9E" Stroke="#FF616161" StrokeThickness="1" Canvas.Right="0" Canvas.Bottom="130">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="0,0">
                            <LineSegment Point="15,0"/>
                            <LineSegment Point="15,10"/>
                            <LineSegment Point="0,10"/>
                            <LineSegment Point="0,0"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
                <Path.RenderTransform>
                    <TransformGroup>
                        <RotateTransform x:Name="hammerRotation" Angle="0" CenterX="0" CenterY="5"/>
                        <TranslateTransform x:Name="hammerTranslation" X="0" Y="0"/>
                    </TransformGroup>
                </Path.RenderTransform>
                <Path.Triggers>
                    <EventTrigger RoutedEvent="Path.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="hammerRotation" 
                                    Storyboard.TargetProperty="Angle"
                                    From="-10" To="20" Duration="0:0:0.5" 
                                    AutoReverse="True" RepeatBehavior="Forever"/>
                                <DoubleAnimation 
                                    Storyboard.TargetName="hammerTranslation" 
                                    Storyboard.TargetProperty="Y"
                                    From="-2" To="2" Duration="0:0:0.5" 
                                    AutoReverse="True" RepeatBehavior="Forever"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Path.Triggers>
            </Path>
        </Canvas>
        
        <materialDesign:Card Style="{StaticResource CardStyle}" Width="380" Height="580" VerticalAlignment="Center" HorizontalAlignment="Center">
            <StackPanel>
                <materialDesign:PackIcon Kind="AccountHardHat" Width="48" Height="48" 
                                       Foreground="{DynamicResource PrimaryHueMidBrush}" 
                                       HorizontalAlignment="Center" Margin="0,16,0,0">
                    <materialDesign:PackIcon.RenderTransform>
                        <RotateTransform x:Name="iconRotation" Angle="0" CenterX="24" CenterY="24"/>
                    </materialDesign:PackIcon.RenderTransform>
                    <materialDesign:PackIcon.Triggers>
                        <EventTrigger RoutedEvent="materialDesign:PackIcon.Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation 
                                        Storyboard.TargetName="iconRotation" 
                                        Storyboard.TargetProperty="Angle"
                                        From="-5" To="5" Duration="0:0:1" 
                                        AutoReverse="True" RepeatBehavior="Forever"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </materialDesign:PackIcon.Triggers>
                </materialDesign:PackIcon>
                
                <TextBlock Text="Регистрация" 
                          Style="{StaticResource HeaderTextStyle}" 
                          HorizontalAlignment="Center" 
                          Margin="0,16,0,24"/>
                
                <TextBox x:Name="txtUsername" 
                        materialDesign:HintAssist.Hint="Логин"
                        Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                        Margin="0,0,0,16"
                        KeyDown="InputField_KeyDown"/>
                
                <PasswordBox x:Name="txtPassword" 
                            materialDesign:HintAssist.Hint="Пароль"
                            Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                            Margin="0,0,0,16"
                            KeyDown="InputField_KeyDown"/>
                
                <TextBox x:Name="txtFullName" 
                        materialDesign:HintAssist.Hint="Полное имя"
                        Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                        Margin="0,0,0,16"
                        KeyDown="InputField_KeyDown"/>
                
                <ComboBox x:Name="cbRoles" 
                         materialDesign:HintAssist.Hint="Роль"
                         Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                         DisplayMemberPath="RoleName"
                         Margin="0,0,0,24"/>
                
                <Button x:Name="btnRegister" 
                       Content="ЗАРЕГИСТРИРОВАТЬ" 
                       Click="btnRegister_Click" 
                       Style="{StaticResource MaterialDesignRaisedButton}"
                       Height="40" 
                       Margin="0,0,0,20"/>
                
                <Button x:Name="btnCancel" 
                       Content="ОТМЕНА" 
                       Click="btnCancel_Click" 
                       Style="{StaticResource MaterialDesignOutlinedButton}"
                       Height="40" 
                       Margin="0,0,0,20"/>
                
                <TextBlock x:Name="txtError" 
                          Foreground="{DynamicResource ValidationErrorBrush}" 
                          HorizontalAlignment="Center"
                          TextWrapping="Wrap"/>
            </StackPanel>
        </materialDesign:Card>
    </Grid>
</Window>
